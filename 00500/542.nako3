### [作品情報]
### タイトル=お絵かきチャット(WebSocket利用)
### 作者=クジラ飛行机(user_id=1)
### ライセンス=N3S_ONLY
### 説明=ColabのWebSocketサーバーを動かしてお絵かきチャットを楽しもう！
### 対象バージョン=3.2.12
### URL=https://news.mynavi.jp/article/nadeshiko-62/
### 種類=wnako
### タグ=
### 更新日時=2021-05-22 22:02:18
###

# --- WebSocketお絵かきチャットの使い方 ---
# 使い方:
# (1) Colabを開いて新規ノートブックを作る
#    [URL] https://colab.research.google.com/
# (2) 以下のコマンドを実行
#    !curl "https://n3s.nadesi.com/plain/546.nako3" > setup.sh
#    !/bin/bash ./setup.sh
# (3) すると、https://xxxxx.trycloudflare.com/ のようなアドレスが表示される
# (4) 以下のプログラムを実行して、上記のアドレスを貼り付ける
# (5) チャットで遊びたい友人にこのプログラムと上記アドレスを教えて実行する
#
# --- ここまで ---

「ColabなどでWebSocketサーバーを起動してアドレスを入力」と尋ねる。
サーバーURL=それ。
W=10
情報＝「＊＊＊」のラベル作成。
# データを受信した時
WS受信時には
    黒色に塗り色設定。
　　情報に対象をテキスト設定。
　　L=対象をJSONデコード。
　　Lを反復
　  　　XY=対象
　  　　XYにWの円描画。
　　ここまで。
ここまで
サーバーURLの「https://」を「wss://」に置換してWSアドレスに代入。
WSアドレスへWS接続。

# マウス操作
軌跡=[]。フラグ=オフ。
描画中キャンバスをマウス押した時には
　　フラグ＝オン。
ここまで。
描画中キャンバスをマウス離した時には
    フラグ＝オフ。
    軌跡をJSONエンコードしてWS送信。
    軌跡=[]
ここまで。
描画中キャンバスをマウス移動した時には
    もし、フラグがオフならば、戻る。
    赤色に塗り色設定。
    [マウスX,マウスY]にWの円描画。
    軌跡に[マウスX,マウスY]を配列追加。
ここまで。